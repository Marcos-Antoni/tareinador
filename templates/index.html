<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tareinador â€” Generador de Tareas con IA</title>
    <meta name="description"
        content="Genera tareas y trabajos acadÃ©micos con inteligencia artificial. Preview, ediciÃ³n y descarga PDF.">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ› ï¸</text></svg>">
</head>

<body>
    <div class="app-container">

        <!-- â•â•â• Header â•â•â• -->
        <header class="app-header">
            <h1>ğŸ› ï¸ El Tareinador</h1>
            <p class="subtitle">Genera tareas acadÃ©micas con inteligencia artificial</p>
        </header>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VIEW 1: SETUP â€” ConfiguraciÃ³n del documento
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="view-setup" class="view active">
            <div class="glass-card">
                <form id="setup-form">
                    <!-- Datos del estudiante -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="input-author">Nombre Completo</label>
                            <input type="text" id="input-author" placeholder="Ej: Marco Antonio LÃ³pez" required>
                        </div>
                        <div class="form-group">
                            <label for="input-carnet">Carnet</label>
                            <input type="text" id="input-carnet" placeholder="Ej: 2024-1234" required>
                        </div>
                    </div>

                    <!-- Datos del trabajo -->
                    <div class="form-group">
                        <label for="input-title">TÃ­tulo del Trabajo</label>
                        <input type="text" id="input-title" placeholder="Ej: La RevoluciÃ³n Industrial y sus Efectos"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="input-topic">DescripciÃ³n del tema / Instrucciones para la IA</label>
                        <textarea id="input-topic"
                            placeholder="Describe quÃ© quieres que investigue la IA. Ej: Investigar sobre las causas y consecuencias de la RevoluciÃ³n Industrial, incluyendo avances tecnolÃ³gicos y cambios sociales..."></textarea>
                    </div>

                    <!-- Secciones del documento -->
                    <div class="form-group">
                        <label>Secciones del documento</label>
                        <div class="sections-grid">
                            <label class="section-option disabled">
                                <input type="checkbox" class="section-checkbox" value="caratula" checked disabled>
                                <span class="checkmark"></span>
                                <span class="label-text">ğŸ“‹ CarÃ¡tula</span>
                                <span class="label-tag">Obligatorio</span>
                            </label>
                            <label class="section-option">
                                <input type="checkbox" class="section-checkbox" value="indice" checked>
                                <span class="checkmark"></span>
                                <span class="label-text">ğŸ“‘ Ãndice</span>
                            </label>
                            <label class="section-option">
                                <input type="checkbox" class="section-checkbox" value="introduccion" checked>
                                <span class="checkmark"></span>
                                <span class="label-text">ğŸ“ IntroducciÃ³n</span>
                            </label>
                            <label class="section-option">
                                <input type="checkbox" class="section-checkbox" value="conclusion" checked>
                                <span class="checkmark"></span>
                                <span class="label-text">âœ… ConclusiÃ³n</span>
                            </label>
                            <label class="section-option">
                                <input type="checkbox" class="section-checkbox" value="bibliografia" checked>
                                <span class="checkmark"></span>
                                <span class="label-text">ğŸ“š BibliografÃ­a</span>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block" id="btn-generate">
                        ğŸ¤– Generar con IA
                    </button>
                </form>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VIEW 2: EDITOR â€” Preview + EdiciÃ³n por pÃ¡gina
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="view-editor" class="view">
            <!-- NavegaciÃ³n de pÃ¡ginas -->
            <div class="glass-card" style="margin-bottom: 1rem;">
                <div class="page-nav">
                    <button class="btn btn-secondary btn-sm" id="btn-prev-page">â† Anterior</button>
                    <div style="text-align:center;">
                        <div class="page-indicator" id="page-indicator">PÃ¡gina 1 de 1</div>
                        <div class="page-title" id="page-title">â€”</div>
                    </div>
                    <button class="btn btn-secondary btn-sm" id="btn-next-page">Siguiente â†’</button>
                </div>
            </div>

            <!-- Layout: Preview + Sidebar -->
            <div class="editor-layout">
                <!-- Preview de la pÃ¡gina -->
                <div class="preview-panel">
                    <div class="preview-content" id="preview-content">
                        <p style="color:#999; text-align:center; padding: 4rem 0;">Genera un documento para comenzar</p>
                    </div>
                </div>

                <!-- Panel lateral de herramientas -->
                <div class="sidebar-panel">
                    <!-- AI Edit -->
                    <div class="sidebar-section">
                        <h3>ğŸ¤– Editar con IA</h3>
                        <textarea class="ai-instructions-area" id="ai-instructions"
                            placeholder="Ej: Haz la introducciÃ³n mÃ¡s formal, agrega mÃ¡s datos estadÃ­sticos..."></textarea>
                        <button class="btn btn-primary btn-sm btn-block" id="btn-ai-edit" style="margin-top: 0.75rem;">
                            Aplicar con IA
                        </button>
                    </div>

                    <!-- Manual Edit -->
                    <div class="sidebar-section">
                        <h3>âœï¸ EdiciÃ³n manual</h3>
                        <button class="btn btn-secondary btn-sm btn-block" id="btn-toggle-edit">
                            âœï¸ Editar manualmente
                        </button>
                        <button class="btn btn-success btn-sm btn-block" id="btn-save-edit"
                            style="display:none; margin-top: 0.5rem;">
                            ğŸ’¾ Guardar cambios
                        </button>
                    </div>

                    <!-- Images -->
                    <div class="sidebar-section">
                        <h3>ğŸ“¸ ImÃ¡genes</h3>
                        <div class="image-gallery" id="image-gallery"></div>
                        <div class="upload-area" id="upload-area" style="margin-top: 0.75rem;">
                            <div class="upload-icon">ğŸ“</div>
                            <p>Arrastra o haz clic para subir imagen</p>
                        </div>
                        <input type="file" id="image-upload-input" accept="image/*" style="display:none;">
                    </div>
                </div>
            </div>

            <!-- Action bar -->
            <div class="action-bar">
                <div class="left-actions">
                    <button class="btn btn-secondary btn-sm" id="btn-new-doc">ğŸ“ Nuevo documento</button>
                    <button class="btn btn-secondary btn-sm" id="btn-full-preview">ğŸ‘ï¸ Vista completa</button>
                </div>
                <div class="right-actions">
                    <button class="btn btn-success" id="btn-download">ğŸ“„ Descargar PDF</button>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VIEW 3: FULL PREVIEW â€” Documento completo
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="view-preview" class="view">
            <div class="glass-card" style="padding: 1rem;">
                <div class="action-bar" style="padding: 0.5rem 0;">
                    <button class="btn btn-secondary btn-sm" id="btn-back-editor">â† Volver al editor</button>
                    <button class="btn btn-success btn-sm" id="btn-new-doc" onclick="handleDownload()">ğŸ“„ Descargar
                        PDF</button>
                </div>
                <iframe id="full-preview-iframe"
                    style="width:100%; height:80vh; border:none; border-radius: 8px; background: white;"></iframe>
            </div>
        </div>

    </div>

    <!-- â•â•â• Loading Overlay â•â•â• -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Generando con IA...</p>
    </div>

    <!-- â•â•â• Toast Notification â•â•â• -->
    <div id="toast" class="toast"></div>

    <script src="/static/app.js"></script>
</body>

</html>